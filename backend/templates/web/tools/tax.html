{% extends "web/base.html" %}

{% block title %}Section 179 Tax Calculator - Business Vehicle Deduction Estimator | DealHawk{% endblock %}
{% block meta_description %}Calculate your Section 179 tax deduction for business vehicles. Includes GVWR lookup, bonus depreciation, IRC 280F limits, and financing scenarios. Free 2026 calculator.{% endblock %}

{% block content %}
<div class="container container--medium">
    <div class="page-header">
        <h1>Section 179 Calculator</h1>
        <p>Estimate your first-year tax deduction for a business vehicle purchase.</p>
    </div>

    <div class="form-card">
        <form hx-post="/tools/tax" hx-target="#results" hx-swap="innerHTML" hx-indicator="#tax-loading" hx-disabled-elt="#tax-btn">
            <div class="form-row">
                <div class="form-group">
                    <label for="vehicle_price">Vehicle Price ($)</label>
                    <input type="number" id="vehicle_price" name="vehicle_price" class="form-input" step="0.01" min="1" max="500000" placeholder="65000" required>
                </div>
                <div class="form-group">
                    <label for="model">Model (optional)</label>
                    <input type="text" id="model" name="model" class="form-input" placeholder="e.g. Ram 2500">
                    <small>Auto-looks up GVWR for known models</small>
                </div>
            </div>

            <div class="form-row">
                <div class="form-group">
                    <label for="business_use_pct">Business Use (%)</label>
                    <input type="number" id="business_use_pct" name="business_use_pct" class="form-input" step="0.1" min="0" max="100" value="100" required>
                </div>
                <div class="form-group">
                    <label for="tax_bracket">Federal Tax Bracket (%)</label>
                    <input type="number" id="tax_bracket" name="tax_bracket" class="form-input" step="0.1" min="0" max="50" value="24" required>
                </div>
            </div>

            <div class="form-row">
                <div class="form-group">
                    <label for="state_tax_rate">State Tax Rate (%)</label>
                    <input type="number" id="state_tax_rate" name="state_tax_rate" class="form-input" step="0.1" min="0" max="20" value="0">
                </div>
                <div class="form-group">
                    <label for="gvwr_override">GVWR Override (lbs)</label>
                    <input type="number" id="gvwr_override" name="gvwr_override" class="form-input" min="0" max="50000" value="0">
                    <small>Leave 0 to auto-detect from model</small>
                </div>
            </div>

            <h3 style="font-size: 15px; margin: 20px 0 12px; color: #334155;">Financing (optional)</h3>

            <div class="form-row">
                <div class="form-group">
                    <label for="down_payment">Down Payment ($)</label>
                    <input type="number" id="down_payment" name="down_payment" class="form-input" step="0.01" min="0" value="0">
                </div>
                <div class="form-group">
                    <label for="loan_interest_rate">Interest Rate (%)</label>
                    <input type="number" id="loan_interest_rate" name="loan_interest_rate" class="form-input" step="0.01" min="0" max="30" value="0">
                </div>
                <div class="form-group">
                    <label for="loan_term_months">Loan Term (months)</label>
                    <input type="number" id="loan_term_months" name="loan_term_months" class="form-input" min="0" max="120" value="60">
                </div>
            </div>

            <button type="submit" id="tax-btn" class="btn btn-primary btn-full">
                <span class="htmx-indicator"><span class="spinner"></span></span>
                <span class="htmx-hide-on-request">Calculate Deduction</span>
                <span class="htmx-indicator">Calculating...</span>
            </button>
        </form>
    </div>

    <div class="results-area" id="results"></div>

    <section class="info-section">
        <h2>What Is Section 179?</h2>
        <p>Section 179 of the IRS tax code allows businesses to deduct the full purchase price of qualifying equipment and vehicles in the year they are placed in service, rather than depreciating them over multiple years.</p>

        <h2>GVWR Thresholds Matter</h2>
        <p>Vehicles over 6,000 lbs GVWR qualify for enhanced deductions. Pickup trucks with beds 6 feet or longer are exempt from the $32,000 heavy SUV cap and can deduct up to the full Section 179 limit. Vehicles under 6,000 lbs are subject to IRC &sect;280F luxury auto limits.</p>

        <h2>100% Bonus Depreciation (OBBBA)</h2>
        <p>Under the One Big Beautiful Bill Act, 100% bonus depreciation is available for qualifying property, allowing full first-year expensing. This applies on top of Section 179 for the business-use portion of the vehicle.</p>
    </section>
</div>
{% endblock %}
