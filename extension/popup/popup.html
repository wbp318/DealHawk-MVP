<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="popup.css">
  <title>DealHawk</title>
</head>
<body>
  <div class="popup">
    <header class="popup__header">
      <h1 class="popup__title">DealHawk</h1>
      <span class="popup__status" id="status-indicator">--</span>
    </header>

    <!-- Auth Section -->
    <section class="popup__section" id="auth-section">
      <!-- Logged out: show login/register -->
      <div id="auth-logged-out" hidden>
        <div class="popup__auth-tabs">
          <button class="popup__auth-tab popup__auth-tab--active" id="auth-login-tab">Login</button>
          <button class="popup__auth-tab" id="auth-register-tab">Register</button>
        </div>
        <div id="auth-login-form" class="popup__auth-form">
          <input type="email" id="login-email" placeholder="Email" spellcheck="false">
          <input type="password" id="login-password" placeholder="Password">
          <button id="login-btn" class="popup__btn popup__btn--auth">Log In</button>
        </div>
        <div id="auth-register-form" class="popup__auth-form" hidden>
          <input type="email" id="register-email" placeholder="Email" spellcheck="false">
          <input type="text" id="register-name" placeholder="Display Name (optional)" maxlength="100">
          <input type="password" id="register-password" placeholder="Password (8+ chars)">
          <button id="register-btn" class="popup__btn popup__btn--auth">Register</button>
        </div>
        <div id="auth-error" class="popup__auth-error" hidden></div>
      </div>
      <!-- Logged in: show user info + subscription -->
      <div id="auth-logged-in" hidden>
        <div class="popup__user-info">
          <span class="popup__user-name" id="user-display-name"></span>
          <span class="popup__tier popup__tier--free" id="tier-badge">Free</span>
          <button id="logout-btn" class="popup__btn popup__btn--small">Logout</button>
        </div>
        <div id="subscription-actions" class="popup__subscription">
          <button id="upgrade-btn" class="popup__btn popup__btn--upgrade">Upgrade to Pro</button>
          <button id="manage-btn" class="popup__btn popup__btn--manage" hidden>Manage Subscription</button>
        </div>
      </div>
    </section>

    <section class="popup__section">
      <div class="popup__stats">
        <div class="popup__stat">
          <span class="popup__stat-value" id="listings-count">0</span>
          <span class="popup__stat-label">Listings Found</span>
        </div>
        <div class="popup__stat">
          <span class="popup__stat-value" id="scored-count">0</span>
          <span class="popup__stat-label">Scored</span>
        </div>
      </div>
    </section>

    <section class="popup__section">
      <h2 class="popup__subtitle">Quick VIN Lookup</h2>
      <div class="popup__vin-input">
        <input type="text" id="vin-input" placeholder="Enter 17-digit VIN" maxlength="17" spellcheck="false">
        <button id="vin-decode-btn">Decode</button>
      </div>
      <div id="vin-result" class="popup__vin-result" hidden></div>
    </section>

    <section class="popup__section popup__section--footer">
      <button id="open-panel-btn" class="popup__btn popup__btn--primary">Open Analysis Panel</button>
    </section>
  </div>

  <script src="popup.js"></script>
</body>
</html>
